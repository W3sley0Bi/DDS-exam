<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>WebSocket Client</title>
	<style>
		#output {
			border: solid 1px #000;
			padding: 5px;
		}
	</style>
</head>
<body>

<form id="form">
	<input type="text" id="message">
	<button type="submit">Send</button>
</form>

<hr>
<div id="output"></div>

<script type="text/javascript">

	var inputBox = document.getElementById("message");
	var output = document.getElementById("output");
	var form = document.getElementById("form");
	
	try {
		var host = "ws://localhost:3000";
		console.log("Host:", host);

		//Open up a WebSocket connection named s
		var s = new WebSocket(host);

		s.onopen = e => {
			// Log message that the socket is open
			
        	console.log("Message is sent...");
		};

		s.onclose = e => {
			// Log message that the socket is closed
			console.log("Connection is closed...");
		};
	
		s.onmessage = e => {
			// Write the messages from the server to the output
			inputBox.value = ""
			var received_msg = e.data;
			let p = document.createElement("p")
			p.innerHTML = `${e.data}`
			output.append(p)
		};
	
		s.onerror = function (e) {
			console.log("Socket error:", e);
		};
	
	} catch (ex) {
		console.log("Socket exception:", ex);
	}

	//Send the data


	form.addEventListener("submit", function(){
		event.preventDefault()
		s.send(inputBox.value)


		
	})

	
	
</script>


</body></html>
